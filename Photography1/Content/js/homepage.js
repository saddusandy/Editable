jQuery(document).ready(function(a){function b(b,c){b instanceof jQuery||(b=a(b));var d=o.scrollTop()+o.height(),e=b.offset().top,f=b.innerHeight(),g=e+f;return c?d>=e-c:d>=g}function c(){o.scrollTop()<=0?s.removeClass("fixed"):s.addClass("fixed")}function d(){b(v,-150)&&v.addClass("fade-in"),b(w,-150)&&w.addClass("fade-in"),b(x,-150)&&x.addClass("fade-in"),b(y,-150)&&y.addClass("fade-in")}function e(){var b=a(".img-container:visible");b.find("img:not([src])").length>0&&f();var c=Math.floor(Math.random()*b.length);b.eq(c).toggleClass("flip")}function f(){var b=a(".img-container:visible .img .front, .img-container:visible .img .back");a.each(b,function(a,b){b.setAttribute("src",b.getAttribute("data-src"))})}function g(){b(z,200)&&(o.off(A,"",g),f(),q||setInterval(e,1500))}function h(){var b=a("#eventsCounter"),c=b.data("start"),d=b.data("end"),e=new CountUp("eventsCounter",c,d,0,1200);e.start()}function i(){b(B,20)&&(o.off(C,"",i),h())}function j(){var b=a("#gmVideo").get(0);E.hide(),b.play(),b.setAttribute("controls","controls")}function k(){var b=a(this).parent();b.hasClass("flip2")||b.addClass("flip1")}function l(){var b=a(this).closest(".tile");if(""===b.children(".tile-home-holder").html()){var c=b.find(".tile-front > div").html();b.children(".tile-home-holder").html(c)}var d=a("#"+a(this).data("link")).html();b.find(".tile-front > div").html(d),b.children(".tile-front").removeClass("tile-home"),b.removeClass("flip1").addClass("flip2")}function m(){var b=a(this).closest(".tile");if(b.hasClass("flip2"))b.removeClass("flip2").addClass("flip1");else if(b.hasClass("flip1")){var c=b.children(".tile-home-holder").html();""!=c&&b.find(".tile-front > div").html(c),b.children(".tile-front").addClass("tile-home"),b.removeClass("flip1")}}function n(){o.on(t,c),o.on(A,g),o.on(C,i),E.one("click",j),F.on("click",k),H.on("click",m),G.on("click",l),r||(o.on(u,d),o.on("load resize",D))}var o=a(window),p=window.navigator.userAgent,q=p.indexOf("MSIE")>-1||p.indexOf("Trident")>-1,r=p.indexOf("MSIE")>-1;q&&(a(".categories").addClass("ie"),r&&(a("#howGMworks > div").addClass("ie"),a(".parallax").removeClass("parallax")));var s=a(".hero-img"),t="scroll.fixHeroImage",u="load.loadHowGMWorks scroll.loadHowGMWorks",v=a(a("#howGMworks>div")[0]),w=a(a("#howGMworks>div")[1]),x=a(a("#howGMworks>div")[2]),y=a(a("#howGMworks>div")[3]),z=a(".image-grid"),A="load.loadImageGrid scroll.loadImageGrid resize.loadImageGrid",B=a(".counter"),C="load.loadEventsCounter scroll.loadEventsCounter resize.loadEventsCounter",D=function(){o.off("scroll.parallax");var b=a(".parallax");if(b.css("transform",""),"relative"==b.css("position")){var c=b.offset().top,d=function(){var a=o.scrollTop(),d=.4*(a-c);b.css("transform","translateY("+d+"px)")};d(),o.on("scroll.parallax",d)}},E=a(".play-button"),F=a(".tile-front"),G=a(".cat-link"),H=a(".tile-previous");n()});